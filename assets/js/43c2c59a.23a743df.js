"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7051],{821:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var n=s(5893),c=s(1151);const r={title:"ExecuteMsg",sidebar_label:"ExecuteMsg",sidebar_position:2,slug:"/contract-api/execute-msg"},i="ExecuteMsg",l={id:"contract-api/execute-msg",title:"ExecuteMsg",description:"The ExecuteMsg is the message that is used to interact with the cw-ica-controller contract.",source:"@site/versioned_docs/version-v0.6.x/contract-api/02-execute-msg.mdx",sourceDirName:"contract-api",slug:"/contract-api/execute-msg",permalink:"/cw-ica-controller/v0.6/contract-api/execute-msg",draft:!1,unlisted:!1,editUrl:"https://github.com/srdtrk/cw-ica-controller/tree/main/docs/versioned_docs/version-v0.6.x/contract-api/02-execute-msg.mdx",tags:[],version:"v0.6.x",sidebarPosition:2,frontMatter:{title:"ExecuteMsg",sidebar_label:"ExecuteMsg",sidebar_position:2,slug:"/contract-api/execute-msg"},sidebar:"docsSidebar",previous:{title:"InstantiateMsg",permalink:"/cw-ica-controller/v0.6/contract-api/instantiate-msg"},next:{title:"QueryMsg",permalink:"/cw-ica-controller/v0.6/contract-api/query-msg"}},d={},o=[{value:"<code>CreateChannel</code>",id:"createchannel",level:2},{value:"<code>CloseChannel</code>",id:"closechannel",level:2},{value:"<code>SendCosmosMsgs</code>",id:"sendcosmosmsgs",level:2},{value:"<code>messages</code>",id:"messages",level:3},{value:"<code>queries</code>",id:"queries",level:3},{value:"<code>packet_memo</code>",id:"packet_memo",level:3},{value:"<code>timeout_seconds</code>",id:"timeout_seconds",level:3},{value:"<code>UpdateCallbackAddress</code>",id:"updatecallbackaddress",level:2},{value:"<code>UpdateOwnership</code>",id:"updateownership",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"executemsg",children:(0,n.jsx)(t.code,{children:"ExecuteMsg"})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"ExecuteMsg"})," is the message that is used to interact with the ",(0,n.jsx)(t.code,{children:"cw-ica-controller"})," contract.\n",(0,n.jsx)(t.strong,{children:"All execute messages are only callable by the owner of the contract."})]}),"\n",(0,n.jsx)(t.h2,{id:"createchannel",children:(0,n.jsx)(t.code,{children:"CreateChannel"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/7773fbd8d4e227b6c942f0c88575f9800809b4bf/src/types/msg.rs#L29-L39\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message is used to initiate an ICS-27 channel open handshake. It is only callable by the owner.\nThis message only takes one optional parameter: ",(0,n.jsx)(t.code,{children:"channel_open_init_options"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["If this parameter is left empty, then the contract will use the ",(0,n.jsx)(t.code,{children:"channel_open_init_options"})," that were last\npassed to the ",(0,n.jsx)(t.code,{children:"InstantiateMsg"})," or ",(0,n.jsx)(t.code,{children:"CreateChannel"})," messages."]}),"\n",(0,n.jsxs)(t.p,{children:["If this parameter is set, then the contract will use the ",(0,n.jsx)(t.code,{children:"channel_open_init_options"})," that are passed to this\nmessage and save them for future ",(0,n.jsx)(t.code,{children:"CreateChannel"})," messages."]}),"\n",(0,n.jsx)(t.h2,{id:"closechannel",children:(0,n.jsx)(t.code,{children:"CloseChannel"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/7773fbd8d4e227b6c942f0c88575f9800809b4bf/src/types/msg.rs#L40-L41\n"})}),"\n",(0,n.jsx)(t.p,{children:"This message is used to close the ICS-27 channel. It is only callable by the owner.\nThe channel can then be reopened with parameters (e.g. channel ordering and version) that are different from the\noriginal channel open handshake."}),"\n",(0,n.jsx)(t.h2,{id:"sendcosmosmsgs",children:(0,n.jsx)(t.code,{children:"SendCosmosMsgs"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/7773fbd8d4e227b6c942f0c88575f9800809b4bf/src/types/msg.rs#L42-L64\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Once an ICS-27 channel open handshake is complete, the owner can control the interchain account on the counterparty\nchain. To give the owner a familiar interface, this message allows the owner to take actions with the interchain\naccount using ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s. This is the recommended way to use the interchain account. We will go over the fields of\nthis message in detail."]}),"\n",(0,n.jsx)(t.h3,{id:"messages",children:(0,n.jsx)(t.code,{children:"messages"})}),"\n",(0,n.jsxs)(t.p,{children:["This is a list of ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s that the contract will execute on the counterparty chain using the interchain account.\nThis execution is atomic. If any of the ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s fail, then the entire execution will fail."]}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsxs)(t.p,{children:["All applicable ",(0,n.jsx)(t.code,{children:"CosmosMsg"}),"s are supported if the channel was opened with ",(0,n.jsx)(t.code,{children:"tx_encoding"})," set to ",(0,n.jsx)(t.code,{children:"proto3"}),".\nThe ",(0,n.jsx)(t.code,{children:"proto3json"})," encoding is not supported by this contract anymore."]}),(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.strong,{children:"CosmosMsg"})}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"proto3"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"Stargate"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"BankMsg::Send"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"BankMsg::Burn"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::Transfer"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::SendPacket"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcMsg::CloseChannel"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"N/A"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"WasmMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"GovMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"StakingMsg::Delegate"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"StakingMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"DistributionMsg::WithdrawDelegatorReward"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\ud83d\udfe2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"DistributionMsg::*"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]})]})]}),(0,n.jsxs)(t.p,{children:["Note that ",(0,n.jsx)(t.code,{children:"\ud83d\udfe2"})," means that the ",(0,n.jsx)(t.code,{children:"CosmosMsg"})," is supported but not tested in the contract's test suite.\nThese will be tested in the future."]})]}),"\n",(0,n.jsx)(t.h3,{id:"queries",children:(0,n.jsx)(t.code,{children:"queries"})}),"\n",(0,n.jsxs)(t.p,{children:["This is a list of ",(0,n.jsx)(t.code,{children:"QueryRequest"}),"s that the contract will execute on the counterparty chain using the interchain account."]}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsx)(t.p,{children:"This feature only works if the host (counterparty) chain is on ibc-go v7.5+. If the host chain is on an older version, then the packet will return an error acknowledgement."})}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["If both ",(0,n.jsx)(t.code,{children:"messages"})," and ",(0,n.jsx)(t.code,{children:"queries"})," are provided, then the ",(0,n.jsx)(t.code,{children:"messages"})," will be executed first. If the ",(0,n.jsx)(t.code,{children:"messages"})," are successful, then the ",(0,n.jsx)(t.code,{children:"queries"})," will be executed. If any of the ",(0,n.jsx)(t.code,{children:"queries"})," fail, then the entire execution will fail."]})}),"\n",(0,n.jsxs)(t.admonition,{type:"note",children:[(0,n.jsx)(t.p,{children:"In CosmosSDK, query execution is not generally deterministic. This is the main reason why not all query requests are supported. The supported query requests are:"}),(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.strong,{children:"QueryRequest"})}),(0,n.jsx)(t.th,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"proto3"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"BankQuery"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"Stargate"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"StakingQuery"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"IbcQuery"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"DistributionQuery"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"center"},children:(0,n.jsx)(t.code,{children:"WasmQuery"})}),(0,n.jsx)(t.td,{style:{textAlign:"center"},children:"\u274c"})]})]})]}),(0,n.jsxs)(t.p,{children:["Note that not all Stargate queries are supported. Only queries which are marked with ",(0,n.jsx)(t.a,{href:"https://github.com/cosmos/cosmos-sdk/blob/27a231ae4816fd8c3ee39a1cc02eccf977fb1b79/proto/cosmos/query/v1/query.proto#L36",children:(0,n.jsx)(t.code,{children:"module_query_safe"})})," tag are supported. You can find a list of supported queries in the ",(0,n.jsx)(t.a,{href:"https://ibc.cosmos.network/main/apps/interchain-accounts/messages/#queries",children:"ibc-go documentation"})," for different versions of ibc-go."]}),(0,n.jsxs)(t.p,{children:["Note that ",(0,n.jsx)(t.code,{children:"WasmQuery"})," support will be added once ",(0,n.jsx)(t.a,{href:"https://github.com/CosmWasm/wasmd/issues/1903",children:"this issue"})," is resolved. Moreover, governance queries (as stargate queries) and ",(0,n.jsx)(t.code,{children:"DistributionQuery"})," will be supported in the next version of the SDK."]})]}),"\n",(0,n.jsx)(t.h3,{id:"packet_memo",children:(0,n.jsx)(t.code,{children:"packet_memo"})}),"\n",(0,n.jsxs)(t.p,{children:["This is the IBC packet memo that will be included in the ICS-27 packet. It is optional and defaults to ",(0,n.jsx)(t.code,{children:'""'}),".\nAdditionally, the memo field is used by some IBC middleware to execute custom logic on the counterparty chain.\nBut most of these middlewares do not yet support ICS-27 channels."]}),"\n",(0,n.jsx)(t.h3,{id:"timeout_seconds",children:(0,n.jsx)(t.code,{children:"timeout_seconds"})}),"\n",(0,n.jsxs)(t.p,{children:["This is the timeout in seconds that will be used for the ICS-27 packet. It is optional and defaults to ",(0,n.jsx)(t.a,{href:"https://github.com/srdtrk/cw-ica-controller/blob/v0.5.0/src/ibc/types/packet.rs#L15-L16",children:(0,n.jsx)(t.code,{children:"DEFAULT_TIMEOUT_SECONDS"})}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"updatecallbackaddress",children:(0,n.jsx)(t.code,{children:"UpdateCallbackAddress"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.5.0/src/types/msg.rs#L92-L97\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message is used to update the contract address that this contract will send callbacks to.\nThis is useful if the owner wants to change the contract that receives the callbacks.\nIf set to ",(0,n.jsx)(t.code,{children:"None"}),", then no callbacks will be sent."]}),"\n",(0,n.jsx)(t.h2,{id:"updateownership",children:(0,n.jsx)(t.code,{children:"UpdateOwnership"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/larry0x/cw-plus-plus/blob/ownable-v0.5.0/packages/ownable/derive/src/lib.rs#L86-L90\n"})}),"\n",(0,n.jsxs)(t.p,{children:["This message type is provided by the ",(0,n.jsx)(t.a,{href:"https://crates.io/crates/cw-ownable",children:"cw-ownable"})," crate. It wraps a\n",(0,n.jsx)(t.code,{children:"cw_ownable::Action"})," enum."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/larry0x/cw-plus-plus/blob/ownable-v0.5.0/packages/ownable/src/lib.rs#L31-L57\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The owner can propose to transfer the ownership of the contract to a new address using ",(0,n.jsx)(t.code,{children:"Action::TransferOwnership"})," and\nset and expiry time for the proposal. If the proposal is accepted before the expiry time through\n",(0,n.jsx)(t.code,{children:"Action::AcceptOwnership"}),", then the ownership of the contract is transferred to the new address."]}),"\n",(0,n.jsxs)(t.p,{children:["You can learn more about ",(0,n.jsx)(t.code,{children:"cw-ownable"})," in its crate documentation."]})]})}function h(e={}){const{wrapper:t}={...(0,c.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>l,a:()=>i});var n=s(7294);const c={},r=n.createContext(c);function i(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);